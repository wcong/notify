<html>
<head>
    <title>notify</title>
    <link href="css/milligram.min.css" type="text/css">
    <script src="js/notify.js" type="text/javascript"></script>
</head>
<body>
<img src="img/background.jpg" style="height: 100%;width: 100%"/>
<script>
    window.addEventListener('load', function () {
        // 首先，让我们检查我们是否有权限发出通知
        // 如果没有，我们就请求获得权限
        if (window.Notification && Notification.permission !== "granted") {
            Notification.requestPermission(function (status) {
                if (Notification.permission !== status) {
                    Notification.permission = status;
                }
            });
        }

        loop();
    });
    var normalNotify = [10, 11, 14, 15, 16, 17];
    var lunchNotify = 12;
    var dinnerNotify = 18;
    var lastNotify;
    function loop() {
        var date = new Date();
        var hour = date.getHours();
        if (hour in normalNotify) {
            judgeNotify(hour);
        }
        if (hour == lunchNotify) {
            judgeNotify(hour);
        }
        if (hour == dinnerNotify) {
            judgeNotify(hour);
        }
        setTimeout("loop()", 1000);
    }
    function judgeNotify(hour){
        if( lastNotify == undefined || lastNotify != hour ){
            notify("get up");
            lastNotify = hour;
        }
    }

</script>
</body>
</html>